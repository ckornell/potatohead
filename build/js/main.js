function randomCacheBuster(e,t){return Math.ceil(Math.random()*t*e)}$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},function(){function e(e){var r=$("#preview_iframe"),a=$(e),n=a.text().trim().replace(".html",""),o=t(a.data("section"),n);r.attr("src",o)}function t(e,t){var r="http://localhost:3008?layout=default";switch(console.log(e,t),e){case"header":r+="&views:header=header/";break;case"footer":r+="&views:footer=footer/";break;case"layouts":r="http://localhost:3008?layout="}return r+t+"&refresh="+randomCacheBuster(100,300)}$(".submenu > li a").on("click",function(){var t=$(this);e(t)})}(),function(){$(".menu > li a").on("click",function(){$(this).parent().find("> .submenu").toggle()}),$(".minicolors").minicolors({control:"wheel",theme:"default"})}(),function(){var e=io.connect("http://localhost:2000");$(".submit-change").on("click",function(t){t.preventDefault(),t.stopPropagation();var r=$(this).data("section"),a=$(this).parents("form").serializeObject();e.emit("stylus rewrite",{directive:r,form:a})}),e.on("refreshFrame",function(){var e=$("#preview_iframe"),t=e.attr("src"),r=randomCacheBuster(2e3,1e3);console.log(t),/\?layout/g.test(t)?e.attr("src",t+"&refresh="+r):e.attr("src",t+"?refresh="+r),console.warn("reloading")})}();