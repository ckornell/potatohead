function randomCacheBuster(t,e){return Math.ceil(Math.random()*e*t)}$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},function(){function t(t){var e=$("#preview_iframe"),r=$(t),n=r.text().trim().replace(".html",""),i=a(r.data("section"),n);e.attr("src",i)}function e(t,e){return Math.ceil(Math.random()*e*t)}function a(t,a){var r="http://localhost:3008?layout=default";switch(console.log(t,a),t){case"header":r+="&views:header=header/";break;case"footer":r+="&views:footer=footer/";break;case"layouts":r="http://localhost:3008?layout="}return r+a+"&refresh="+e(100,300)}$(".submenu > li a").on("click",function(){var e=$(this);t(e)})}(),function(){$(".menu > li a").on("click",function(){$(this).parent().find("> .submenu").toggle()})}(),function(){var t=io.connect("http://localhost:2000");$(".submit-change").on("click",function(e){e.preventDefault(),e.stopPropagation();var a=$(this).data("section"),r=$(this).parents("form").serializeObject();t.emit("stylus rewrite",{directive:a,form:r})}),t.on("refreshFrame",function(){function t(){var t=$("#preview_iframe"),e=t.attr("src"),a=randomCacheBuster(2e3,1e3);console.log(e),/\?layout/g.test(e)?t.attr("src",e+"&refresh="+a):t.attr("src",e+"?refresh="+a)}t(),console.warn("reloading")})}();